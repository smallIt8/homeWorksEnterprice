name: Auto Merge HW PRs

on:
  pull_request:
    branches:
      - main
    paths:
      - 'HW-*/**'

jobs:
  assign-reviewer:
    runs-on: ubuntu-latest
    steps:
      - name: Assign reviewer
        uses: kentaro-m/auto-assign-action@v1
        with:
          reviewers: 'AleksandrMSK'

  auto-merge:
    needs: assign-reviewer
    runs-on: ubuntu-latest
    steps:
      - name: Auto merge after review and CI success
        uses: pascalgn/automerge-action@v0.15.4
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          mergeMethod: squash
          requiredApprovals: 1
          strict: true
